  <div class="container">
    <h1>Log Application</h1>
        <% const date1= new Date() %>
        <form method="post" action="/log" >
            <div class="row">
                <div class="col-md-3 mt-1 mb-1" >    
                    <input type="text" class="form-control" name="cari" value="<%= typeof cari!='undefined'?cari:''%>">
                </div>
                <div class="col-md-2 mt-1">
                    <input type="date" class="form-control" value="<%=typeof tgl1!='undefined' ? tgl1 : date1.toISOString().slice(0,10)%>" name="tgl1">
                </div>  
                <div class="col-md-3 mt-1">
                    <button type="submit" class="btn btn-primary d-block"><i class="bi bi-search"></i> Cari</button>
                </div>
            </div> 
        </form>
    <div class="row">
        <div class="col">

            <!-- menampilkan pesan -->
            <% if (msg.length !== 0) { %>
                <div class="alert alert-success" role="alert"> <%= msg %> </div>
            <% } %>

            <% if (msg2.length !== 0) { %>
                <div class="alert alert-warning" role="alert"> <%= msg2 %> </div>
            <% } %>

            <table class="table table-striped table-hover  mt-3">
                <thead class="table-primary">
                    <tr>
                        <th width="150px">No</th>
                        <th width="150px">Nama</th>
                        <th width="150px">Role</th>
                        <th width="250px">Url</th>
                        <th width="150px">Method</th>
                        <th width="150px">Tanggal</th>
                        <th width="150px">Waktu</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (logs == null) { %>
                        <tr><td colspan="7"><center><b>Log dari website ini masih kosong </b></center></td></tr>  
                    <% }else if (logs.length == 0) { %>
                        <tr><td colspan="7"><center><b>Log website kosong</b></center></td></tr>
                    <% }else{ %>  
                        <% logs.forEach( (log,index) => { %>
                            <tr>
                                <td><%= index+1 %></td>
                                <td><%= log.name %> </td>
                                <td><%= log.role %> </td>
                                <td><%= log.url %> </td>                    
                                <td>
                                    <% if (log.method=='POST') { %>
                                        <p class="btn btn-success btn-sm"><%=log.method%></p>
                                    <% }else{ %>
                                        <p class="btn btn-info btn-sm"><%=log.method%></p>
                                    <% } %>                     
                                </td>
                                <td><%= log.tanggal.toLocaleDateString('id-ID') %> </td>
                                <td><%= log.waktu %></td>      
                            </tr>
                        <% }) %>
                    <% } %> 
                </tbody>
            </table>
               
        </div>
    </div>
</div>

